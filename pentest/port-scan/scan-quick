#!/usr/bin/env python3

import socket
from colorama import init, Fore

# Adding some colors (optional)
init()
GREEN = Fore.GREEN
RED = Fore.RED
RESET = Fore.RESET


def is_port_open(host, port):
    """Determines whether the host has the port open."""
    # Creates a new socket
    s = socket.socket()
    try:
        # Tries to connect to host using that port
        s.connect((host, port))
        # Make a timeout if you want it a little faster (means less accuracy)
        # s.settimeout(0.2) <-- if you want to add a timeout
        s.close()  # Close the socket after a successful connection
        return True
    except:
        # Cannot connect (port is closed) and returns false
        return False


# Asks the user to enter a host
host = input("Enter the host: ")
# Asks the user to enter the maximum port to scan
max_port = int(input("Enter the maximum port to scan: "))

# Scan ports from 1 to the maximum port specified
for port in range(1, max_port + 1):
    if is_port_open(host, port):
        print(f"{GREEN}[+] {host}:{port} is open      {RESET}")   # Prints green text for open ports
    else:
        print(f"{RED}[!] {host}:{port} is closed    {RESET}")  # Prints red text for closed ports
